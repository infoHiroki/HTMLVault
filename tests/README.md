# テストスイート

HTMLファイル管理システムのテストスイートです。

## 📁 ファイル構成

```
tests/
├── README.md                    # このファイル
├── test-runner.html            # テスト実行UI
├── test-framework.js           # 軽量テストフレームワーク
├── metadata-extraction.test.js # メタデータ抽出テスト
├── category-classification.test.js # カテゴリー分類テスト
└── search-functionality.test.js   # 検索機能テスト
```

## 🚀 テスト実行方法

### ブラウザで実行
```bash
# プロジェクトルートで
python -m http.server 8000
# または
npx serve .

# ブラウザで以下にアクセス
http://localhost:8000/tests/test-runner.html
```

### 実行可能なテスト

1. **🔄 全テスト実行** - すべてのテストを順次実行
2. **📄 メタデータテスト** - HTMLメタデータ抽出機能のテスト
3. **🏷️ カテゴリーテスト** - カテゴリー分類ロジックのテスト  
4. **🔍 検索テスト** - 検索・フィルター機能のテスト

## 📋 テスト項目

### HTMLメタデータ抽出テスト (12項目)
- ✅ 基本的なタイトル抽出
- ✅ H1からのタイトル抽出
- ✅ ファイル名からのタイトル生成
- ✅ meta description抽出
- ✅ OG description抽出
- ✅ 長い説明文の切り詰め
- ✅ キーワードからのタグ抽出
- ✅ タイトルからのタグ推測
- ✅ IDの生成
- ✅ 作成日の設定
- ✅ 取得失敗時のnull返却
- ✅ タグ数の制限

### カテゴリー分類テスト (12項目)
- ✅ 制度・補助金カテゴリーの分類
- ✅ 教育・AIカテゴリーの分類
- ✅ 技術・開発カテゴリーの分類
- ✅ デザインカテゴリーの分類
- ✅ ビジネスカテゴリーの分類
- ✅ その他カテゴリーの分類
- ✅ 複数キーワードマッチ時の優先順位
- ✅ 大文字小文字の区別なし
- ✅ 部分マッチの動作
- ✅ 空文字・null入力への対処
- ✅ タイトルからのタグ抽出
- ✅ 重複タグの除去

### 検索機能テスト (12項目)
- ✅ タイトルでの検索
- ✅ 説明文での検索
- ✅ タグでの検索
- ✅ カテゴリーでの検索
- ✅ 部分マッチ検索
- ✅ 大文字小文字を区別しない検索
- ✅ 複数キーワード検索
- ✅ 存在しないキーワードでの検索
- ✅ 空文字検索
- ✅ ソート機能 - 日付順
- ✅ ソート機能 - 名前順
- ✅ フィルターとソートの組み合わせ

## 🔧 テストフレームワーク仕様

### 基本的な使い方
```javascript
TestRunner.suite('テストスイート名', ({ test, beforeEach, afterEach }) => {
    beforeEach(() => {
        // 各テスト前の準備
    });
    
    test('テスト名', (assert) => {
        assert.equal(actual, expected, 'メッセージ');
    });
});
```

### アサーション関数
- `assert.equal(actual, expected, message)` - 等価性チェック
- `assert.truthy(value, message)` - 真偽値チェック
- `assert.includes(array, item, message)` - 配列包含チェック
- `assert.throws(fn, message)` - 例外発生チェック
- その他多数...

### モック機能
- `MockHTMLDocument` - HTMLパース結果のモック
- `MockFetch` - fetch APIのモック

## 📊 期待される結果

すべてのテストが通過する場合：
- **成功: 36件**
- **失敗: 0件** 
- **スキップ: 0件**

## 🐛 トラブルシューティング

### よくある問題

1. **CORS エラー**
   ```
   解決方法: ローカルサーバーを起動してアクセス
   python -m http.server 8000
   ```

2. **テストが実行されない**
   ```
   解決方法: auto-scan.jsが正しく読み込まれているか確認
   ```

3. **特定のテストだけ失敗**
   ```
   解決方法: ブラウザの開発者ツールでエラーログを確認
   ```

## 🔄 テスト追加方法

新しいテストを追加する場合：

1. `tests/` フォルダに `*.test.js` ファイルを作成
2. `test-runner.html` に script タグで読み込み
3. `TestRunner.suite()` でテストスイートを定義

## 📈 カバレッジ目標

- **メタデータ抽出**: 95%以上
- **カテゴリー分類**: 90%以上  
- **検索機能**: 85%以上
- **エラーハンドリング**: 80%以上